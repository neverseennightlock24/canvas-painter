<!DOCTYPE html>
<html>

<head>
    <title>Random Walker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
    <script>
        let xPos, yPos; // Position of the square
        let stepX, stepY; // Direction of movement
        let hitBorder = false; // Flag to track if the square hit the border
        let squareColor = [0, 0, 0]; // Initial color of the square
        let squareSize = 10; // Size of the square

        function setup() {
            createCanvas(windowWidth, windowHeight);
            xPos = windowWidth / 2;
            yPos = windowHeight / 2;
            stepX = 1;
            stepY = 0;
            noStroke(); // Remove the stroke border of the square
            background(255);
        }

        function draw() {
            // Move the square
            xPos += stepX * squareSize;
            yPos += stepY * squareSize;

            // Reduce step counter
            // This is to control the delay between changing directions
            // and it will always keep the square from overlapping itself
            if (!hitBorder) {
                stepX = floor(random(-1, 2));
                stepY = floor(random(-1, 2));
            }

            // Check if the square moves beyond the canvas size and reset the position to the center
            if (xPos < 0 || xPos > width || yPos < 0 || yPos > height) {
                xPos = width / 2;
                yPos = height / 2;
                hitBorder = true; // Set the flag to true when hitting the border

                // Change the color and direction when hitting the border
                squareColor = [random(255), random(255), random(255)];
                stepX = floor(random(-1, 2));
                stepY = floor(random(-1, 2));
            } else {
                hitBorder = false; // Reset the flag when not hitting the border
            }

            // Draw the square with the current fill color
            fill(squareColor[0], squareColor[1], squareColor[2]);
            rect(xPos, yPos, squareSize, squareSize);
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            xPos = windowWidth / 2;
            yPos = windowHeight / 2;
        }
    </script>
</body>

</html>
